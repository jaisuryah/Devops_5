trigger:
- main

pool:
  vmImage: 'ubuntu-latest'

steps:
# 1. Set up Java
- task: JavaToolInstaller@0
  inputs:
    versionSpec: '11'       # or 17 if you need Java 17
    jdkArchitecture: 'x64'
    jdkSourceOption: 'PreInstalled'


# 3. Run Maven regression tests
- task: Maven@4
  inputs:
    mavenPomFile: 'pom.xml'
    goals: 'clean test'
    options: '-P regression-tests'   # profile to run regression tests
    publishJUnitResults: true
    testResultsFiles: '**/target/surefire-reports/TEST-*.xml'
    javaHomeOption: 'Path'
    jdkDirectory: '/usr/lib/jvm/adoptopenjdk-11-hotspot-amd64'
